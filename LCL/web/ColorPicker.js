var colors=["234,153,153","249,203,156","255,229,153","182,215,168","162,196,201","159,197,232","180,167,214","213,166,189","224,102,102","246,178,107","255,217,102","147,196,125","118,165,175","111,168,220","142,124,195","194,123,160","204,0,0","230,145,56","241,194,50","106,168,79","69,129,142","61,133,198","103,78,167","166,77,121","153,0,0","180,95,6","191,144,0","56,118,29","19,79,92","11,83,148","53,28,117","116,27,71","102,0,0","120,63,4","127,96,0","39,78,19","12,52,61","7,55,99","32,18,77","76,17,48","255,0,0","255,153,0","255,255,0","0,255,0","0,255,255","0,0,255","153,0,255","255,0,255","0,0,0","68,68,68","102,102,102","153,153,153","204,204,204","238,238,238","243,243,243","255,255,255"];function IsChildOf(b,a){while(b.parentNode){if(b==a){return true}b=b.parentNode}return false}function ColorPicker(){var e=this;this.onColorSelected=null;this.trigger=null;this.color="";this.cells=new Array();this.transparentTable=null;this.transparentCell=null;this.lastElement=null;var g=0;var b=document.createElement("div");b.id="colorPicker";b.style.visibility="hidden";b.style.background="silver";var i,j,h;i=document.createElement("table");i.style.marginBottom="8px";j=document.createElement("tr");h=document.createElement("td");h.style.width="152px";h.style.height="16px";h.style.textAlign="center";h.style.backgroundPosition="2px 2px";h.style.cursor="default";h.appendChild(document.createTextNode("Transparent"));h.onclick=function(){e.SetColor("");if(e.onColorSelected){e.onColorSelected(e.color)}e.div.style.visibility="hidden"};j.appendChild(h);this.transparentCell=h;i.appendChild(j);b.appendChild(i);this.transparentTable=i;i=document.createElement("table");i.style.marginBottom="8px";for(var a=0;a<5;++a){j=document.createElement("tr");for(var f=0;f<8;++f,++g){h=this.CreateCell(colors[g]);this.cells.push(h);j.appendChild(h)}i.appendChild(j)}b.appendChild(i);i=document.createElement("table");i.style.marginBottom="8px";j=document.createElement("tr");for(var f=0;f<8;++f,++g){h=this.CreateCell(colors[g]);this.cells.push(h);j.appendChild(h)}i.appendChild(j);b.appendChild(i);i=document.createElement("table");j=document.createElement("tr");for(var f=0;f<8;++f,++g){h=this.CreateCell(colors[g]);this.cells.push(h);j.appendChild(h)}i.appendChild(j);b.appendChild(i);document.body.appendChild(b);this.SetColor("rgb(0, 0, 0)");this.div=b;var d=function(c){var c=c||window.event;var k=(c&&c.target)||(c&&c.srcElement);if(!IsChildOf(k,e.div)&&!IsChildOf(k,e.trigger)){e.div.style.visibility="hidden"}};if(document.addEventListener){document.addEventListener("mousedown",d,false)}else{if(document.attachEvent){document.attachEvent("onmousedown",d)}}}ColorPicker.prototype.CreateCell=function(c){var d=this;var a=document.createElement("td");a.style.background="rgb("+c+")";var b=document.createElement("div");b.style.width="16px";b.style.height="16px";b.style.border="1px solid rgb("+c+")";b.onmouseover=function(){this.style.border="1px solid white"};b.onmouseout=function(){this.style.border="1px solid rgb("+c+")"};b.onclick=function(){d.SetColor(this.parentNode.style.backgroundColor);if(d.onColorSelected){d.onColorSelected(d.color)}d.div.style.visibility="hidden"};b.appendChild(document.createComment(""));a.appendChild(b);return a};ColorPicker.prototype.removeSpaces=function(a){return a.split(" ").join("")};ColorPicker.prototype.compareRGB=function(b,a){return this.removeSpaces(b)==this.removeSpaces(a)};ColorPicker.prototype.SetColor=function(b){if(b.indexOf("rgb(")<0){b=""}this.color=b;if(b==""){this.transparentCell.style.backgroundImage="url('./images/ColorPicker/tick.png')";for(var a=0;a<this.cells.length;++a){this.cells[a].style.backgroundImage=""}}else{this.transparentCell.style.backgroundImage="";for(var a=0;a<this.cells.length;++a){if(this.compareRGB(this.cells[a].style.backgroundColor,b)){this.cells[a].style.backgroundImage="url('./images/ColorPicker/tick.png')"}else{this.cells[a].style.backgroundImage=""}}}};ColorPicker.prototype.PopUp=function(c,d){this.transparentTable.style.display=d?"":"none";if(this.div.style.visibility=="hidden"){this.lastElement=c;this.trigger=c;this.SetColor(c.style.backgroundColor);var h=GetElementPos(c);var b=h.x;var a=h.y+c.clientHeight;var g=this.div.clientHeight;var e=this.div.clientWidth;var f=document.documentElement.clientHeight;if(f>0&&a+g+1>f){a=h.y-g-4}if(b+e>document.body.scrollWidth){b=document.body.scrollWidth-e-4}this.div.style.left=b+"px";this.div.style.top=a+"px";this.div.style.visibility="visible"}else{this.div.style.visibility="hidden"}};